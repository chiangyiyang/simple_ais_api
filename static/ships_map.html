<!DOCTYPE html>
<html lang="zh-tw">

<head>
    <meta charset="UTF-8">
    <title>船舶位置地圖</title>
    <!-- Include the CesiumJS JavaScript and CSS files -->
    <script src="https://cesium.com/downloads/cesiumjs/releases/1.126/Build/Cesium/Cesium.js"></script>
    <link href="https://cesium.com/downloads/cesiumjs/releases/1.126/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
    <style>
        html,
        body,
        #cesiumContainer {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
    </style>
</head>

<body>
    <!-- query UI 已移至 [`static/query.js`](static/query.js:1) -->
    <div id="cesiumContainer"></div>
    <script>
        Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiYWU1ZDY3ZC1mYzM1LTQwMTUtYWEwMy1hZjBlZjdlNmRmZTUiLCJpZCI6MjQ5ODg1LCJpYXQiOjE3Mjk1ODExNjJ9.PMxlzgfO9AnBGlodb-qOO8DFhUMOFc3QMbfFqVKk7xY';

        // 初始化 Cesium Viewer
        const viewer = new Cesium.Viewer('cesiumContainer', {
            // terrain: Cesium.Terrain.fromWorldTerrain(),
            animation: false,          // ⛔ Disable animation controls
            timeline: false,           // ⛔ Disable timeline
            baseLayerPicker: false,    // ⛔ Disable base layer selector
            geocoder: false,           // ⛔ Disable search box
            homeButton: false,         // ⛔ Disable home button
            // infoBox: false,            // ⛔ Disable info box
            sceneModePicker: false,    // ⛔ Disable 2D/3D mode switch
            navigationHelpButton: false, // ⛔ Disable help button
            fullscreenButton: false,   // ⛔ Disable fullscreen button
            selectionIndicator: false, // ⛔ Disable selection highlight
            shouldAnimate: false       // ⛔ Don't auto-play animations
        });

        // 載入 alarm_area.geojson 並加入為 layer（若你的伺服器可在根目錄提供此檔案）
        Cesium.GeoJsonDataSource.load('/static/alarm_area.geojson', { clampToGround: true })
            .then(function (dataSource) {
                viewer.dataSources.add(dataSource);
                // 調整樣式：多邊形半透明填色與外框
                dataSource.entities.values.forEach(function (entity) {
                    if (Cesium.defined(entity.polygon)) {
                        entity.polygon.material = Cesium.Color.RED.withAlpha(0.2);
                        entity.polygon.outline = true;
                        entity.polygon.outlineColor = Cesium.Color.RED;
                    } else if (Cesium.defined(entity.polyline)) {
                        entity.polyline.material = Cesium.Color.RED;
                        entity.polyline.width = 2;
                    } else if (Cesium.defined(entity.point)) {
                        entity.point.pixelSize = 8;
                        entity.point.color = Cesium.Color.RED;
                    }
                });
            })
            .catch(function (err) {
                console.error('Failed to load alarm_area.geojson', err);
            });

        // getArrowPolyline 已移至 [`static/query.js`](static/query.js:1)


        // 查詢功能已搬移至 [`static/query.js`](static/query.js:1)
        // query.js 會在 viewer 與 getArrowPolyline 定義之後載入
    </script>
    <script src="/static/query.js"></script>
</body>
 
</html>